<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Selecting model variables — model-variable-selection • assemblerr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Selecting model variables — model-variable-selection"><meta property="og:description" content="The output task allows to select model variables using
a concise mini language. You can select variables by
name or using one of the helper functions described below.
Overview of selection features


The selection of variables builds on the tidyselect package
which implements a powerful variable selection language (see tidyselect::language).
The following features are most relevant for the
selection of model variables:
| for selecting the union of several variables
c()  for combining selections
! for taking the complement of a set of variables


In addition, you can select variables using a combination of the following helper functions:
vars_prms() selects all model parameters
vars_data() selects all data defined variables
vars_eta() selects all eta variables
vars_nm_std() selects the standard NONMEM variables DV, PRED, RES, WRES, IPREDI, IWRESI
vars_starts_with() selects variables that start with a prefix
vars_matches() selects variables that match a regular expression



"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">assemblerr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/getting-started.html">Getting started</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/UUPharmacometrics/assemblerr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Selecting model variables</h1>
    <small class="dont-index">Source: <a href="https://github.com/UUPharmacometrics/assemblerr/blob/HEAD/R/variables.R" class="external-link"><code>R/variables.R</code></a></small>
    <div class="hidden name"><code>model-variable-selection.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The output task allows to select model variables using
a concise mini language. You can select variables by
name or using one of the helper functions described below.</p><div class="section">
<h3 id="overview-of-selection-features">Overview of selection features<a class="anchor" aria-label="anchor" href="#overview-of-selection-features"></a></h3>


<p>The selection of variables builds on the tidyselect package
which implements a powerful variable selection language (see <a href="https://tidyselect.r-lib.org/reference/language.html" class="external-link">tidyselect::language</a>).
The following features are most relevant for the
selection of model variables:</p><ul><li><p><code>|</code> for selecting the union of several variables</p></li>
<li><p><code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>  for combining selections</p></li>
<li><p><code>!</code> for taking the complement of a set of variables</p></li>
</ul><p>In addition, you can select variables using a combination of the following helper functions:</p><ul><li><p><code>vars_prms()</code> selects all model parameters</p></li>
<li><p><code>vars_data()</code> selects all data defined variables</p></li>
<li><p><code>vars_eta()</code> selects all eta variables</p></li>
<li><p><code>vars_nm_std()</code> selects the standard NONMEM variables DV, PRED, RES, WRES, IPREDI, IWRESI</p></li>
<li><p><code>vars_starts_with()</code> selects variables that start with a prefix</p></li>
<li><p><code>vars_matches()</code> selects variables that match a regular expression</p></li>
</ul></div>

    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vars_prms</span><span class="op">(</span><span class="va">vars</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">vars_data</span><span class="op">(</span><span class="va">vars</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">vars_eta</span><span class="op">(</span><span class="va">vars</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">vars_nm_std</span><span class="op">(</span><span class="va">vars</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">vars_starts_with</span><span class="op">(</span><span class="va">match</span>, <span class="va">vars</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">vars_matches</span><span class="op">(</span><span class="va">match</span>, <span class="va">vars</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>vars</dt>
<dd><p>A character vector of variable names (taken from the selection context)</p></dd>


<dt>match</dt>
<dd><p>A character vector to match against</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A selection context</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="model.html">model</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="input_variables.html">input_variable</a></span><span class="op">(</span><span class="st">"dose"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="prm_log_normal.html">prm_log_normal</a></span><span class="op">(</span><span class="st">"emax"</span>, median <span class="op">=</span> <span class="fl">10</span>, var_log <span class="op">=</span> <span class="fl">0.09</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="prm_log_normal.html">prm_log_normal</a></span><span class="op">(</span><span class="st">"ed50"</span>, median <span class="op">=</span> <span class="fl">50</span>, var_log <span class="op">=</span> <span class="fl">0.09</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="algebraic.html">algebraic</a></span><span class="op">(</span><span class="va">effect</span><span class="op">~</span><span class="va">emax</span><span class="op">*</span><span class="va">dose</span><span class="op">/</span><span class="op">(</span><span class="va">ed50</span> <span class="op">+</span> <span class="va">dose</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="obs_proportional.html">obs_proportional</a></span><span class="op">(</span><span class="op">~</span><span class="va">effect</span>, var_prop <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># output all model parameter and eta variables</span></span></span>
<span class="r-in"><span><span class="fu"><a href="render.html">render</a></span><span class="op">(</span><span class="va">m</span>, tasks <span class="op">=</span> <span class="fu"><a href="tsk_output.html">tsk_output</a></span><span class="op">(</span><span class="st">"prms"</span>, variables <span class="op">=</span> <span class="fu">vars_prms</span><span class="op">(</span><span class="op">)</span> <span class="op">|</span> <span class="fu">vars_eta</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $PROBLEM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $INPUT DOSE ID DV</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $DATA data.csv IGNORE=@</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $PRED</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EMAX = THETA(1) * EXP(ETA(1))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ED50 = THETA(2) * EXP(ETA(2))</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EFFECT = EMAX * DOSE/(ED50 + DOSE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Y = EFFECT + EFFECT * EPS(1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $TABLE EMAX ED50 ETA(1) ETA(2) FILE=prms NOAPPEND NOPRINT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $THETA (0, 10, Inf) ; POP_EMAX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $THETA (0, 50, Inf) ; POP_ED50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $OMEGA 0.09 ; IIV_EMAX</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $OMEGA 0.09 ; IIV_ED50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $SIGMA 1; RUV_PROP</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sebastian Ueckert, F. Hoffmann-La Roche Ltd..</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

